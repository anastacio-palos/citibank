package com.ibm.openpages.ext.util;import com.ibm.openpages.ext.tss.service.impl.LoggerUtil;import org.apache.commons.logging.Log;import java.io.File;import java.io.IOException;import java.net.URI;import java.nio.file.*;import java.util.HashMap;import java.util.Map;public class ZipUtil {    public static File zipFile(File file) throws IOException {        LoggerUtil loggerUtil = new LoggerUtil();        loggerUtil.initService();        URI uri = URI.create("jar:" + file.toURI()+".zip");        Log log = loggerUtil.getExtLogger();        log.info("file.getPath() : " + file.getPath());        Path source = Paths.get(file.getPath());        Map<String, String> env = new HashMap<>();        env.put("create", "true");        try (FileSystem zipfs = FileSystems.newFileSystem(uri, env))        {            Path pathInZipfile = zipfs.getPath(source.getFileName().toString());            Files.copy(source, pathInZipfile, StandardCopyOption.REPLACE_EXISTING);        }        File returnFile = new File(file.getPath() + ".zip");        if (returnFile.exists())        {            System.out.println("returnFile exist!");            return returnFile;        }        return returnFile;    }}