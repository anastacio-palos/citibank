/*
* This file was generated by the Gradle 'init' task.
*
* This generated file contains a sample Java Library project to get you started.
* For more details take a look at the Java Libraries chapter in the Gradle
* User Manual available at https://docs.gradle.org/5.4.1/userguide/java_library_plugin.html
*/

plugins {
	// Apply the java-library plugin to add support for Java Library
	id 'eclipse' apply true
	id 'eclipse-wtp' apply true
	id 'java' apply true
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

def globalConf = rootProject.ext

dependencies {
	Map<String, String> dependencies = globalConf.commonDependencies
	compile dependencies.openpages
	compile dependencies.spring
	compile dependencies.commonservices
	compile dependencies.jackson
    compile dependencies.test
    compile 'org.apache.httpcomponents:httpcore:4.4.11'
    compile 'org.apache.httpcomponents:httpclient:4.5.9'
    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.17.1'
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.17.1'
	implementation dependencies.testng
implementation "javax.annotation:javax.annotation-api:1.3.2"
}


eclipse {
	project {
		name = 'citibank-OPWebApps'
	}
}
test {
	// Use TestNG for unit tests
	useTestNG()
}

task createEmplyoeeSelectorHelperJar(type: Jar){
	println ("Executing.... create employee selector helper jar task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
		'Implementation-Version': '1.0'
	}
	baseName = 'employee-selector-helper-app'
	from sourceSets.main.output
    include '**/AppConfig*.class', '**/CRCService.class', '**/CRCConstants.class', '**/ChangeHistory.class', '**/Data.class', '**/Employee.class', '**/EmployeeHRDSMTInfo.class', '**/EmployeeSelectorGRCObjectDetailsInfo.class',
            '**/EmployeeSelectorHelperAppInfo.class', '**/EmployeeSelectorObjectGenericDetails.class', '**/GridData.class', '**/GridDataHeaderColumnInfo.class',
            '**/Node.class', '**/OMUDsmtLinkDisplayData.class', '**/OMUDsmtRoot.class', '**/Validation.class', '**/EmployeeSelectorConstants*.class', 
            '**/EmployeeSelectorController.class', '**/EmployeeSelectorServiceImpl.class', '**/IEmployeeSelectorService.class', '**/EmployeeSelectorHelperUtil.class'
}

task createIncrementCounterCustomActionJar(type: Jar){
	println ("Executing .... create increment counter custom actions jars task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC - Increment Counter Custom Actions',
				'Implementation-Version': '1.0'
	}
	baseName = 'increment_counter_custom-actions-ext'
	from sourceSets.main.output
	include '**/IncrementCounterCustomAction.class', '**/IncrementCounterConstants.class'

}

task createNewDSMTLinkCustomActionJar(type: Jar){
	println ("Executing .... create New DSMT Link custom actions jars task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC - New DSMT Link Custom Actions',
				'Implementation-Version': '1.0'
	}
	baseName = 'new_dsmt_link_custom-actions-ext'
	from sourceSets.main.output
	include '**/NewDSMTLinkCustomAction.class', '**/NewDSMTLinkConstants.class'

}

task createNextAuditDateCustomActionJar(type: Jar){
	println ("Executing .... create Next Audit Date Custom Action jars task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC - Next Audit Date Custom Actions',
				'Implementation-Version': '1.0'
	}
	baseName = 'next_audit_date_custom-actions-ext'
	from sourceSets.main.output
	include '**/NextAuditDateCustomAction.class', '**/NextAuditDateConstants.class'

}

task createAuditableEntityDSMTHelperJar(type: Jar){
	println ("Executing .... create dsmt helper jar task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
				'Implementation-Version': '1.0'
	}
	baseName = 'auditable-entity-dsmt-link-helper-app'
	from sourceSets.main.output
	include '**/AuditableEntityDSMTLinkController.class', '**/AuditableEntityDSMTLinkServiceImpl.class',
			'**/IAuditableEntityDSMTLinkService.class', '**/AuditableEntityDSMTLinkExceptionConstants.class',
			'**/AuditableEntityDSMTLinkConstants.class', '**/AuditableEntityDSMTLinkExceptionConstants.class',
			'**/CreateDSMTLinkForAudEntityInfo.class'
}

task createAuditDSMTHelperJar(type: Jar){
	println ("Executing .... create dsmt helper jar task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
				'Implementation-Version': '1.0'
	}
	baseName = 'audit-dsmt-link-helper-app'
	from sourceSets.main.output
	include '**/AuditDSMTLinkController.class', '**/IAuditDSMTLinkService.class', '**/AuditDSMTLinkServiceImpl.class',
			'**/AuditDSMTLinkConstants.class'
}

task createIssueDSMTHelperJar(type: Jar){
	println ("Executing .... create dsmt helper jar task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
				'Implementation-Version': '1.0'
	}
	baseName = 'issue-dsmt-link-helper-app'
	from sourceSets.main.output
	include '**/IssueDSMTLinkController.class', '**/IIssueDSMTLinkService.class', '**/IssueDSMTLinkBaseServiceImpl.class',
			'**/AuditIssueDSMTLinkServiceImpl.class', '**/BMQSIssueDSMTLinkServiceImpl.class',
			'**/AdHocIssueDSMTLinkServiceImpl.class', '**/IssueDSMTLinkConstants.class', '**/IssueType.class',
			'**/IssueStatus.class', '**/IssueSubType.class', '**/CitiIssueInfo.class', '**/AncestorControlsInfo.class'
}

task createControlDSMTHelperJar(type: Jar){
	println ("Executing .... create dsmt helper jar task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
				'Implementation-Version': '1.0'
	}
	baseName = 'control-dsmt-link-helper-app'
	from sourceSets.main.output
	include '**/ControlDSMTLinkController.class', '**/IControlDSMTLinkService.class',
			'**/IControlDSMTLinkService.class', '**/ControlDSMTLinkServiceImpl.class'
}

task createAuditMappingReportDSMTHelperJar(type: Jar){
	println ("Executing .... create dsmt helper jar task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
				'Implementation-Version': '1.0'
	}
	baseName = 'audit-mapping-report-dsmt-link-helper-app'
	from sourceSets.main.output
	include '**/AuditMappingReportDSMTLinkController.class', '**/IAuditMappingReportDSMTLinkService.class',
			'**/AuditNonIERAMRServiceImpl.class', '**/BMQSIERAMRServiceImpl.class', '**/BMQSNonIERAMRServiceImpl.class',
			'**/AuditMappingReportDSMTLinkConstants.class', '**/AuditMappingReportStatus.class',
			'**/AuditMappingReportType.class', '**/AuditMappingReportInfo.class', '**/AuditIERAMRServiceImpl.class',
			'**/AuditMappingResourceBaseServiceImpl.class', '**/AncestorIssueInfo.class',
			'**/AuditIERAMRConstants.class', '**/BMQSIERAMRConstants.class'
}

task createCorrectiveActionPlanDSMTHelperJar(type: Jar){
	println ("Executing .... create CAP dsmt helper jar task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
				'Implementation-Version': '1.0'
	}
	baseName = 'cap-dsmt-link-helper-app'
	from sourceSets.main.output
	include '**/CorrectiveActionPlanDSMTLinkController.class', '**/ICorrectiveActionPlanDSMTLinkService.class',
			'**/CorrectiveActionPlanDSMTLinkServiceImpl.class', '**/CorrectiveActionPlanDSMTLinkConstants.class'
}

task createDSMTHelperCommonUtilsJar(type: Jar){
	println ("Executing .... create dsmt helper jar task")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
				'Implementation-Version': '1.0'
	}
	baseName = 'dsmt-link-common-utils-helper-app'
	from sourceSets.main.output
	include '**/DSMTLinkBaseController.class', '**/ExtReactHelperController.class', '**/DSMTLinkBaseServiceImpl.class',
			'**/IDSMTLinkService.class', '**/DSMTLinkServiceUtilImpl.class', '**/IDSMTHelperAppBaseDAO.class',
			'**/DSMTDataAccessConfig.class', '**/DSMTLinkHelperUtil.class',
			'**/HelperAppExceptionConstants.class', '**/DSMTSearchQueryConstants.class',
			'**/DSMTLinkHelperAppHeaderInfo.class', '**/DSMTLinkHelperConstants.class','**/DSMTDBConfigurationConstants.class',
			'**/DSMTLinkHelperAppInfo.class', '**/DSMTHelperAppBaseDAOImpl.class',
			'**/DSMTLinkObjectAssociationInfo.class', '**/DSMTLinkObjectInfo.class', '**/DSMTLinkSearchInfo.class',
			'**/DSMTLinkUpdateInfo.class', '**/DSMTObjectGenericDetails.class', '**/ExistingDSMTLinkBaseInfo.class',
			'**/ExistingDSMTLinkInfo.class', '**/GRCObjectDetailsInfo.class', '**/DataGridInfo.class',
			'**/DSMTLinkDisableInfo.class', '**/DSMTLinkSearchResultInfo.class', '**/DataGridHeaderColumnInfo.class',
			'**/UpdateDSMTLinkInfo.class','**/DSMTDatasourceConfigReader.class','**/DBConfig.class'
}

task createDSMTJobJar(type: Jar){
	println ("Executing .... create dsmt interface batch job")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
				'Implementation-Version': '1.0'
	}
	baseName = 'dsmt-sync-interface'
	from sourceSets.main.output
	include '**/DSMTData.class', '**/DSMTDetails.class', '**/DSMTConstant*.class', '**/DSMTInterfaceJob.class',
			'**/DSMTUpdateProcessor.class', '**/CustomFieldUtil.class', '**/CustomEnumFieldUtil.class',
			'**/EmailConfiguration.class', '**/EmailContent.class', '**/EmailService.class', '**/DSMTTripletModel' +
			'.class','**/ReportRecord.class','**/DSMTReportRecord.class','**/CSVWriter.class','**/CustomEnumFieldUtil' +
            '.class','**/CustomFieldUtil.class','**/ParentFinderUtil.class','**/ZipUtil.class',
            '.class','**/CustomFieldUtil.class','**/ParentFinderUtil.class','**/ZipUtil.class',
			'**/DSMTTripletDataProcessor.class'

}


task createContextHelperJar(type: Jar){
	println ("Executing .... create dsmt interface batch job")
	manifest {
		attributes 'Implementation-Title': 'IBM OpenPages GRC',
				'Implementation-Version': '1.0'
	}
	baseName = 'context-helper-app'
	from sourceSets.main.output
	include '**/ContextHelperAppInfo.class', '**/ContextHelperConstants.class', '**/ContextHelperController.class',
	'**/ContextServiceImpl.class', '**/IContextHelperService.class', '**/ContextHelperDisplayInfo.class'

}

task createAuditPlanBenchmarkHelperJar(type: Jar){
    println ("Executing .... create audit plan benchmark helper Jar")
    manifest {
        attributes 'Implementation-Title': 'IBM OpenPages GRC',
                'Implementation-Version': '1.0'
    }
    baseName = 'audit-plan-benchmark-helper-app'
    from sourceSets.main.output
    include '**/AuditPlanBenchmarkHelperAppInfo.class', '**/AuditPlanBenchmarkHelperDisplayInfo.class', '**/GRCObjectInfo.class',
    '**/AuditPlanBenchmarkHelperConstants.class', '**/AuditPlanBenchmarkHelperController.class', '**/IAuditPlanBenchmarkHelperService.class', 
    '**/AuditPlanBenchmarkServiceImpl.class'

}

task createOMUInterfaceJar(type: Jar) {
	println("Executing .... create jar task")
	manifest {
		attributes(
				'Implementation-Title': 'IBM OpenPages GRC - OMU Interface',
				'Implementation-Version': '1.1',
				'Build-Timestamp': new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ").format(new Date()),
				'Created-By': "Gradle ${gradle.gradleVersion}",
				'Build-Jdk': "${System.properties['java.version']} (${System.properties['java.vendor']} ${System.properties['java.vm.version']})",
				'Build-OS': "${System.properties['os.name']} ${System.properties['os.arch']} ${System.properties['os.version']}"
		)
	}
	baseName = 'OMUInterface'
	from sourceSets.main.output
	include 'com/ibm/openpages/ext/batch/omu/**'
}
task createInterfaceCommonJar(type: Jar){
	println ("Executing .... create jar task")

	manifest {
		attributes(
				'Implementation-Title': 'IBM OpenPages GRC - Interface Common',
				'Implementation-Version': '2.0',
				'Build-Timestamp': new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ").format(new Date()),
				'Created-By'     : "Gradle ${gradle.gradleVersion}",
				'Build-Jdk'      : "${System.properties['java.version']} (${System.properties['java.vendor']} ${System.properties['java.vm.version']})",
				'Build-OS'       : "${System.properties['os.name']} ${System.properties['os.arch']} ${System.properties['os.version']}"
		)
	}
	baseName = 'CommonRestAPIInterface'
	from sourceSets.main.output
	include 'com/ibm/openpages/ext/interfaces/common/**'
	include 'com/ibm/openpages/ext/rest/InterfacesApplicationConfig.*'

}

task createQueryJar(type: Jar){
	println ("Executing .... create jar task")
	manifest {
		attributes(
				'Implementation-Title': 'Query Tool',
				'Implementation-Version': '1.0',
				'Build-Timestamp': new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ").format(new Date()),
				'Created-By': "Gradle ${gradle.gradleVersion}",
				'Build-Jdk': "${System.properties['java.version']} (${System.properties['java.vendor']} ${System.properties['java.vm.version']})",
				'Build-OS': "${System.properties['os.name']} ${System.properties['os.arch']} ${System.properties['os.version']}"
		)
	}
	baseName = 'QueryInterface'
	from sourceSets.main.output
	include 'com/ibm/openpages/ext/rest/QueryController.*'
	include 'com/ibm/openpages/ext/interfaces/query/**'

}

task createIcapsIssueInterfacesJar(type: Jar){
	println ("Executing .... create jar task")
	manifest {
		attributes(
				'Implementation-Title': 'IBM OpenPages GRC - iCaps Interface',
				'Implementation-Version': '0.1',
				'Build-Timestamp': new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ").format(new Date()),
				'Created-By': "Gradle ${gradle.gradleVersion}",
				'Build-Jdk': "${System.properties['java.version']} (${System.properties['java.vendor']} ${System.properties['java.vm.version']})",
				'Build-OS': "${System.properties['os.name']} ${System.properties['os.arch']} ${System.properties['os.version']}"
		)
	}
	baseName = 'IcapsIssueInterfaces'
	from sourceSets.main.output
	include 'com/ibm/openpages/ext/interfaces/icaps/**'
	include 'com/ibm/openpages/ext/rest/IssueController.*'
	include 'com/ibm/openpages/ext/workflow/action/CacheUpdateSaveResource.**'
	include 'com/ibm/openpages/ext/workflow/action/PushAuditIssueAction.**'
	include 'com/ibm/openpages/ext/workflow/action/PushRegulatoryIssueAction.**'
	include 'com/ibm/openpages/ext/trigger/icaps/**'

}

task createCMPRestAPIInterfaceJar(type: Jar){
	println ("Executing .... create jar task")
	manifest {
		attributes(
				'Implementation-Title': 'IBM OpenPages GRC - CMP Interface',
				'Implementation-Version': '1.1',
				'Build-Timestamp': new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ").format(new Date()),
				'Created-By': "Gradle ${gradle.gradleVersion}",
				'Build-Jdk': "${System.properties['java.version']} (${System.properties['java.vendor']} ${System.properties['java.vm.version']})",
				'Build-OS': "${System.properties['os.name']} ${System.properties['os.arch']} ${System.properties['os.version']}"
		)
	}
	baseName = 'CMPRestAPIInterface'
	from sourceSets.main.output
	include 'com/ibm/openpages/ext/interfaces/cmp/**'
	include 'com/ibm/openpages/ext/rest/EntitlementController.*'
}

task createRunCalculationJar(type: Jar){
	println ("Executing .... create jar task")
	manifest {
		attributes(
				'Implementation-Title': 'IBM OpenPages GRC - schedulerForIssueCalcs',
				'Implementation-Version': '1.1',
				'Build-Timestamp': new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ").format(new Date()),
				'Created-By': "Gradle ${gradle.gradleVersion}",
				'Build-Jdk': "${System.properties['java.version']} (${System.properties['java.vendor']} ${System.properties['java.vm.version']})",
				'Build-OS': "${System.properties['os.name']} ${System.properties['os.arch']} ${System.properties['os.version']}"
		)
	}
	baseName = 'schedulerForIssueCalcs'
	from sourceSets.main.output
	include 'com/ibm/openpages/ext/citi/schedulers/custom/action/RunCalculation.*'
}